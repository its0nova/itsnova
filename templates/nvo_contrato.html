{% extends "layout.html" %}
{% block content %}

<head>
    <title>HOME-INT</title>
</head>
<script src="https://kit.fontawesome.com/c8a4eef53d.js" crossorigin="anonymous"></script>
<body style="background-color:#ffff;">
<br>

<h2>Contrato</h2>

  <h5>Datos del empleado</h5>
    <script type="text/javascript" src="/static/js/jquery-3.2.1.slim.min.js"></script>
    <script type="text/javascript" src="/static/js/popper.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>

    <div class="form-row">
        <div class="form-group col-md-2">
            <label for="curp">CURP</label>
        <input minlength="18" maxlength="18" type="text" class="form-control" name="curp" id="curp" value="{{empleados.0[0]}}" disabled pattern="([A-Z]{4,})+([0-9]{6,})+([A-Z]{6,})+([0-9]{2,})">
        </div>
        <div class="form-group col-md-9">
            <label for="nombre">AP. Paterno    Ap.Materno    Nombre(s)</label>
            <input type="text" class="form-control" name="nombre" id="nombre" value="{{empleados.0[2]}}" disabled>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-7">
            <label for="domicilio">Domicilio</label>
            <input type="text" class="form-control" name="domicilio" id="domicilio" value="{{empleados.0[4]}}" disabled>
        </div>
        <div class="form-group col-md-4">
            <label for="rfc">RFC</label>
            <input  minlength="13" maxlength="13" type="text" class="form-control" name="rfc" id="rfc" placeholder="0101010101" value="{{empleados.0[1]}}" disabled pattern="([A-Z]{4,})+([0-9]{6,})+([A-Z0-9]{3,})">
        </div>
        <div class="form-group col-md-7">
            <label for="nacionalidad">Nacionalidad</label>
            <input type="text" class="form-control" name="nacionalidad" id="nacionalidad" placeholder="nacionalidad" value="{{empleados.0[3]}}" disabled>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-2">
            <label for="telefono">Teléfono</label>
        <input minlength="10" maxlength="10" type="text" class="form-control" name="telefono" id="telefono" value="{{empleados.0[5]}}" placeholder="000000.00" pattern="[0-9.]+" disabled>
        </div>
        <div class="form-group col-md-3">
            <label for="correoe">Correo Electrónico</label>
            <input type="email" class="form-control" name="correoe" id="correoe" value="{{empleados.0[6]}}" disabled>
        </div>

        <div class="form-group col-md-1">
            <label for="edad">Edad</label>
        <input type="text" class="form-control" name="edad" id="edad" value="{{empleados.0[8]}}" placeholder="00" pattern="[0-9.]+" disabled>
        </div>
        <div class="form-group col-md-1">
            <label for="nss">N.S.S</label>
            <input type="text" class="form-control" name="nss" id="nss" value="{{empleados.0[9]}}" placeholder="000000.00" pattern="[0-9.]+" disabled>
        </div>
        <div class="form-group col-md-2">
            <label for="sexo">Sexo</label>
            <select name="sexo" id="sexo" class="form-control" disabled>
                {% if empleados.0[7] == "M" %}
                  <option value="M">Masculino</option>
                  <option value="F">Femenino</option>
                {% else %}
                   <option value="F">Femenino</option>
                   <option value="M">Masculino</option>
                {% endif %}


            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="edociv">E. Civil</label>
            <select name="edociv" id="edociv" class="form-control" disabled>
              {% if empleados.0[10]==1 %}
                <option value="1">Soltero/a</option>
                <option value="2">Casado/a</option>
                <option value="3">Union Libre</option>
                <option value="4">Divorcio</option>
              {% else %}
                {% if empleados.0[10]==2 %}
                  <option value="2">Casado/a</option>
                  <option value="1">Soltero/a</option>
                  <option value="3">Union Libre</option>
                  <option value="4">Divorcio</option>
                {% else %}
                  {% if empleados.0[10]==3 %}
                    <option value="3">Union Libre</option>
                    <option value="1">Soltero/a</option>
                    <option value="2">Casado/a</option>
                    <option value="4">Divorcio</option>
                  {% else %}
                  <option value="4">Divorcio</option>
                  <option value="1">Soltero/a</option>
                  <option value="2">Casado/a</option>
                  <option value="3">Union Libre/</option>
                  {% endif %}
                {% endif %}
              {% endif %}

          </select>
        </div>
    </div>

    <div class="form-row">
            <div class="form-group col-md-9">
                    <label for="nomcoy">Cónyugue_concubino(nombre de esposa)</label>
                <input type="text" class="form-control" name="nomcoy" id="nomcoy" value="{{empleados.0[11]}}" disabled>
            </div>


            <div class="form-group col-md-9">
                <label for="nomcaux">Nombre de contacto</label>
                <input type="text" class="form-control" name="nomcaux" id="nomcaux" value="{{empleados.0[13]}}" disabled>
            </div>

            <div class="form-group col-md-2">
                <label for="telaux">Teléfono de contacto</label>
            <input type="text" class="form-control" name="telaux" id="telaux" value="{{empleados.0[12]}}" disabled>
            </div>


        <div class="form-group col-md-4">
                <label for="numinfonavit">Número de infonavit</label>
                <input type="text" class="form-control" name="numinfonavit" id="numinfonavit"  value="{{empleados.0[14]}}" disabled>
        </div>
    </div>
    {% for empleado in empleados %}
    
      <a href="/ed_empleado/{{ empleado.0 }}" class="btn btn-primary">Editar Perfil &nbsp;<i class="far fa-edit"></i></a></center>
      <a href="/vercontrato/{{empleado.0 }}" class="btn btn-primary">Regresar &nbsp;<i class="fas fa-undo-alt"></i></a></center>
    </td>
  </tr>
  {% endfor %}
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <br>
  <br>
  <h5>Datos para contrato</h5>
<form action="/agr_nvo_contrato" method="POST">  
    <div class=form-row>
        <input minlength="18" maxlength="18" type="text" class="form-control" name="curp" id="curp" value="{{empleados.0[0]}}" hidden>
        
        <div class="form-group col-md-2">
          <label for="estatus">Estatus de contrato</label>
          <select name="estatus" id="estatus" class="form-control" readonly>
            <option value="1" selected>En proceso </option readonly>
          </select> 
        </div>
        <div class="form-group col-md-2">
          <label for="tipcon">Tipo de contrato</label>
            <select name="tipcon" id="tipcon" class="form-control">
                <option value="" selected>Choose...</option>
                    {%
                        for tipcon in tipocontrato
                    %}
                        <option value="{{ tipcon.0 }}">{{ tipcon.1 }}</option>
                    {%   endfor %}
            </select> 
        </div> 
      </div>
      <div class=form-row>
        <div class="form-group col-md-4">
            <label for="puesto">Puesto</label>
            <input type="text" class="form-control" name="idpuesto" id="idpuesto" placeholder="" value="{{impor.0[3]}}" hidden>
            <input type="text" class="form-control" name="puesto" id="puesto" placeholder="" value="{{impor.0[4]}}" required>
        </div>
        
    
        <div class="form-group col-md-2">
            <label for="salario">Salario Mensual</label>
            <input type="text" class="form-control" name="salario" id="salario" placeholder="" value="{{impor.0[5]}}" required>
        </div>
        <div class="form-group col-md-3">
            <label for="salario">ㅤ</label>
            <input type="text" class="form-control" name="sall" id="sall" placeholder="LETRA" value="{{impor.0[6]}}"  required> 
        </div>
    </div>
    <div class=form-row>
        <div class="form-group col-md-4">
            <label for="area">Área </label>
            <input type="text" class="form-control" name="id_area" id="id_area" placeholder="" value="{{impor.0[1]}}" hidden >
            <input type="text" class="form-control" name="area" id="area" placeholder="" value="{{impor.0[2]}}" required>
        </div>

        <div class="form-group col-md-2">
            <label for="diapaga">Días de paga</label>
            <input type="text" class="form-control" name="diapaga" id="diapaga" required>
        </div>

    </div>
   
        <div class=form-row>

        <div class="form-group col-md-2">
            <label for="fecha_inicio">Fecha de inicio &nbsp;<i class="fas fa-calendar-day"></i></label>
            <input type="date" class="form-control" name="fecha_inicio" id="fecha_inicio" required>
            
        </div>

        <div class="form-group col-md-2">
            <label for="fecha_fin">Fecha de conclusion &nbsp;<i class="fas fa-calendar-day"></i></label>
            <input type="date" class="form-control" name="fecha_fin" id="fecha_fin" required>
        </div>

        <div class="form-group col-md-2">
            <label for="jornada">Jornada</label>
            <select class="form-control" id="country" name="country" required>
                <option selected>Chosse...</option>
                {% for row in jornada %}
                <option value="{{row.IdJornada}}">{{row.jornombre}}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group col-md-2">
                <label for="hsemana">Horas a la semana</label>
                <select class="form-control" id="state" name="state" required></select>
            
        </div>
        <div class="form-group col-md-2">
            <label for="dias">Horario</label>
            <input type="text" class="form-control" name="dias" id="dias" required>

            
        </div>

    </div>
    <input type="submit" class="btn btn-primary"> 
</form>
    <script>
    country_select = document.getElementById('country');
    state_select = document.getElementById('state');
    
    
    country_select.onchange = function(){
        country = country_select.value;
        console.log(country)
        fetch('state/' + country).then(function(response){
        response.json().then(function(data) {
        optionHTML = '';
        for (state of data.statecountry) {
            optionHTML += '<option value="' + state.iddesc +'">' + state.name + '</option>'
            
        }
        console.log(country)
        state_select.innerHTML = optionHTML;
        });
        });
    }
     
    
    // deshabilitar fecha_fin cuando el tipo de contrato sea permanente 
    tipo_select = document.getElementById('tipcon'); 
    fechafin = document.getElementById ('fecha_fin'); 

    fechafin.readOnly=false; 
    tipo_select.onchange = function(){
      tipcon = tipo_select.value; 
      console.log(tipcon);

      if (tipcon ==='2'){
        fechafin.readOnly=true; 
        
      } else {
        fechafin.readOnly=false; 
        
      }
    }



    //CONVERTIR NUMEROS A LETRAS
    document.getElementById("salario").addEventListener("keyup",function(e){
    document.getElementById('sall').value= salarioALetras(this.value);
    });
     
     
    function Unidades(num){
     
      switch(num)
      {
        case 1: return "UN";
        case 2: return "DOS";
        case 3: return "TRES";
        case 4: return "CUATRO";
        case 5: return "CINCO";
        case 6: return "SEIS";
        case 7: return "SIETE";
        case 8: return "OCHO";
        case 9: return "NUEVE";
      }
     
      return "";
    }
     
    function Decenas(num){
     
      decena = Math.floor(num/10);
      unidad = num - (decena * 10);
     
      switch(decena)
      {
        case 1:
          switch(unidad)
          {
            case 0: return "DIEZ";
            case 1: return "ONCE";
            case 2: return "DOCE";
            case 3: return "TRECE";
            case 4: return "CATORCE";
            case 5: return "QUINCE";
            default: return "DIECI" + Unidades(unidad);
          }
        case 2:
          switch(unidad)
          {
            case 0: return "VEINTE";
            default: return "VEINTI" + Unidades(unidad);
          }
        case 3: return DecenasY("TREINTA", unidad);
        case 4: return DecenasY("CUARENTA", unidad);
        case 5: return DecenasY("CINCUENTA", unidad);
        case 6: return DecenasY("SESENTA", unidad);
        case 7: return DecenasY("SETENTA", unidad);
        case 8: return DecenasY("OCHENTA", unidad);
        case 9: return DecenasY("NOVENTA", unidad);
        case 0: return Unidades(unidad);
      }
    }//Unidades()
     
    function DecenasY(strSin, numUnidades){
      if (numUnidades > 0)
        return strSin + " Y " + Unidades(numUnidades)
     
      return strSin;
    }//DecenasY()
     
    function Centenas(num){
     
      centenas = Math.floor(num / 100);
      decenas = num - (centenas * 100);
     
      switch(centenas)
      {
        case 1:
          if (decenas > 0)
            return "CIENTO " + Decenas(decenas);
          return "CIEN";
        case 2: return "DOSCIENTOS " + Decenas(decenas);
        case 3: return "TRESCIENTOS " + Decenas(decenas);
        case 4: return "CUATROCIENTOS " + Decenas(decenas);
        case 5: return "QUINIENTOS " + Decenas(decenas);
        case 6: return "SEISCIENTOS " + Decenas(decenas);
        case 7: return "SETECIENTOS " + Decenas(decenas);
        case 8: return "OCHOCIENTOS " + Decenas(decenas);
        case 9: return "NOVECIENTOS " + Decenas(decenas);
      }
     
      return Decenas(decenas);
    }//Centenas()
     
    function Seccion(num, divisor, strSingular, strPlural){
      cientos = Math.floor(num / divisor)
      resto = num - (cientos * divisor)
     
      letras = "";
     
      if (cientos > 0)
        if (cientos > 1)
          letras = Centenas(cientos) + " " + strPlural;
        else
          letras = strSingular;
     
      if (resto > 0)
        letras += "";
     
      return letras;
    }//Seccion()
     
    function Miles(num){
      divisor = 1000;
      cientos = Math.floor(num / divisor)
      resto = num - (cientos * divisor)
     
      strMiles = Seccion(num, divisor, "MIL", "MIL");
      strCentenas = Centenas(resto);
     
      if(strMiles == "")
        return strCentenas;
     
      return strMiles + " " + strCentenas;
     
      //return Seccion(num, divisor, "UN MIL", "MIL") + " " + Centenas(resto);
    }//Miles()
     
    function Millones(num){
      divisor = 1000000;
      cientos = Math.floor(num / divisor)
      resto = num - (cientos * divisor)
     
      strMillones = Seccion(num, divisor, "UN MILLON", "MILLONES");
      strMiles = Miles(resto);
     
      if(strMillones == "")
        return strMiles;
     
      return strMillones + " " + strMiles;
     
      //return Seccion(num, divisor, "UN MILLON", "MILLONES") + " " + Miles(resto);
    }//Millones()
     
    function salarioALetras(num,centavos){
      var data = {
        salario: num,
        enteros: Math.floor(num),
        centavos: (((Math.round(num * 100)) - (Math.floor(num) * 100))),
        letrasCentavos: "",
      };
      if(centavos == undefined || centavos==false) {
        data.letrasMonedaPlural="PESOS";
        data.letrasMonedaSingular="PESO";
      }else{
        data.letrasMonedaPlural="CENTAVOS";
        data.letrasMonedaSingular="CENTAVO";
      }
     
      if (data.centavos > 0)
        data.letrasCentavos = "CON " + salarioALetras(data.centavos,true);
     
      if(data.enteros == 0)
        return "CERO " + data.letrasMonedaPlural + " " + data.letrasCentavos;
      if (data.enteros == 1)
        return Millones(data.enteros) + " " + data.letrasMonedaSingular + " " + data.letrasCentavos;
      else
        return Millones(data.enteros) + " " + data.letrasMonedaPlural + " " + data.letrasCentavos;
    }//salarioALetras()
    </script>
    <script>

    </script>
</body>
{% endblock %}